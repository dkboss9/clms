(function(a){a.fn.pdsformbuilder=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof c==="object"||!c){return b.init.apply(this,arguments)}else{a.error("Method "+c+" does not exist on jQuery.pdsformbuilder")}};var b={init:function(b){var d=a.extend({},a.fn.pdsformbuilder.defaults,b);return this.each(function(){var b=this;var e=a(this);this.options=d;var f=d["imagebase"];if(e.find(d["itemsContainer"]).length==0||e.find(d["itemPropertyContainer"]).length==0||e.find(d["formPropertyContainer"]).length==0||e.find(d["outputContainer"]).length==0){return}this.nofield_in_page=a('<li class="no_fields_in_page">'+'<img src="'+d["imagebase"]+'arrow_border_right.png" style="padding-bottom: 20px">'+"<h3>This form has no fields yet!</h3>"+'<p><span style="color: #529214; font-weight: bold;">Click the buttons</span> on the right sidebar or <span style="color: #529214; font-weight: bold;">Drag it here</span> to add new field.</p>'+"</li>");this.pages=[],this.page_count=0,this.current_page=0,this.page_fields={},this.fields={},this.fields_count=0,this.current_field=0,this.field_childs={},this.paramKey=d["paramKey"];this.$iH=a('<ul class="form-items-list"></ul>');this.$iC=e.find(d["itemsContainer"]);this.$oC=e.find(d["outputContainer"]);this.$tH=e.find(d["tabsHolder"]);this.$iPC=e.find(d["itemPropertyContainer"]);this.$fPC=e.find(d["formPropertyContainer"]);this.$fHC=e.find(d["formHeaderContainer"]);this.$fCC=e.find(d["formContentsContainer"]);this.$fFC=e.find(d["formFooterContainer"]);this.$fOH=e.find(d["formOutputHolder"]);this.items=d["itemsAvailable"];for(var g in this.items){this.$iH.append('<li id="btn_'+g+'" class="box" data-type="'+g+'">'+'<a id="a_'+g+'" href="' + base_url + '#" title="'+this.items[g]+'" data-type="'+g+'">'+'<img src="'+d["imagebase"]+g+'.png" alt="'+this.items[g]+'">'+'<span class="blabel">'+this.items[g]+"</span></a></li>")}this.$iH.append('<div class="clear"></div>');this.$iC.html(this.$iH);this.$tabs=this.$tH.tabs();if(this.$fOH.find("li").length==0)e.pdsformbuilder("addPage");this.$fOH.find("li.form-page").live("click",function(){var b=a(this);e.pdsformbuilder("setCurrentPage",b.attr("data-page"))});this.$iC.find("ul.form-items-list li a").live("click",function(){var b=a(this);e.pdsformbuilder("addField",b.attr("data-type"))}).draggable({revert:"invalid",helper:"clone"});this.$fOH.find("li.form-page ul.form-page-holder").droppable({accept:d["itemsContainer"]+" .box a",over:function(b,c){var d=a(this);d.addClass("accept-ready")},out:function(b,c){var d=a(this);d.removeClass("accept-ready")},drop:function(b,c){var d=a(this);d.removeClass("accept-ready");var f=c.draggable;e.pdsformbuilder("addField",f.attr("data-type"))}});this.$fOH.find("li.form-page ul.form-page-holder li.field_li").live("click",function(){var c=a(this);b.$tabs.tabs("select",1);e.pdsformbuilder("selectField",c.attr("data-field"))});this.$fOH.find("li.form-page ul.form-page-holder").sortable({items:"li:not(.no_fields_in_page)",placeholder:"ui-state-highlight",update:function(c,d){var e=d.item;var f=e.attr("data-field");var g=b.$fFC.find("#element_properties_hidden_container .element_properties_hidden").length;if(g>1){var h=0;var i=0;b.$fOH.find("li.form-page ul.form-page-holder li.field_li").each(function(){if(a(this).attr("id")=="field_li_"+f){i=h}h++});var j=b.$fFC.find("#element_properties_"+f).clone();j.attr("id","tmpli");if(i==0)b.$fFC.find("#element_properties_hidden_container").prepend(j);else if(i==g-1)b.$fFC.find("#element_properties_hidden_container").append(j);else b.$fFC.find("#element_properties_hidden_container #element_properties_"+(i+1)).before(j);b.$fFC.find("#element_properties_"+f).remove();j.attr("id","element_properties_"+f)}}});this.$fHC.html(c.header());this.$fPC.html(c.form_property());this.$fFC.html(c.footer(this.paramKey));this.$iPC.html(c.field_property(d["imagebase"]));this.$iPC.find("#element_properties_form").css("display","none");this.$iPC.find("#element_label, #element_desc, #element_value").syncEdit("<div></div>",{greedy:"yes",onSync:function(a,c,d){var e=d.attr("id");var f=e.split("_");var g=f[1];var h=a.parent();if(!h.attr("data-field"))h=h.parent();var i=h.attr("data-field");if(i){var j=b.$fFC.find("#element_properties_"+i+" #element_"+i+"_attrs_"+g);if(j.length>0)j.val(c)}}});this.$iPC.find("#element_class, #element_name, #element_filter, #element_rows, #element_cols, #element_exts, #element_required, #element_maxsize, #element_size, #element_as, #element_attrs, #element_active").syncEdit("<div></div>",{greedy:"yes"});this.$iPC.find("#element_placeholder").syncEdit("<div></div>",{greedy:"yes",onSync:function(b,c){var d=b.attr("id");if(d){var e=String(d).split("_");var f=e[1];if(f){if(a("#field_li_"+f+" div textarea").length>0)a("#field_li_"+f+" div textarea").attr("placeholder",c);else a("#field_li_"+f+" div input").attr("placeholder",c)}}}});this.$fPC.find("#form_title").syncEdit("#form-header-title",{greedy:"yes",onSync:function(a,c,d){b.$fFC.find("#form_title_value").val(c)}});this.$fPC.find("#form_description").syncEdit("#form-header-desc",{greedy:"yes",onSync:function(a,c,d){b.$fFC.find("#form_desc_value").val(c)}});this.$fPC.find("#form_footer_description").syncEdit("#form-footer-desc",{greedy:"yes",onSync:function(a,c,d){b.$fFC.find("#form_footer_desc_value").val(c)}});this.$fPC.find("#form_captcha").syncEdit(this.options["formFooterContainer"]+" #form_captcha_value",{greedy:"yes"});this.$fPC.find("#form_limit_perip").syncEdit(this.options["formFooterContainer"]+" #form_limit_perip_value",{greedy:"yes"});this.$fPC.find("#form_maxsubs").syncEdit(this.options["formFooterContainer"]+" #form_maxsubs_value",{greedy:"yes"});this.$fHC.find("#form-header-title, #form-header-desc").click(function(){var c=a(this);b.$tabs.tabs("select",2);if(c.attr("id")=="form-header-title")b.$fPC.find("#form_title").focus();else if(c.attr("id")=="form-header-desc")b.$fPC.find("#form_description").focus();else if(c.attr("id")=="form-footer-desc")b.$fPC.find("#form_footer_description").focus()});this.$fFC.find("#form-footer-desc").click(function(){var c=a(this);b.$tabs.tabs("select",2);if(c.attr("id")=="form-footer-desc")b.$fPC.find("#form_footer_description").focus()});this.$iPC.find("#element_delete").click(function(a){if(confirm("Are you sure to delete this field ?")){e.pdsformbuilder("deleteField",e[0].current_field)}a.preventDefault();return false});this.$iPC.find("#add_elem_choice").click(function(a){e.pdsformbuilder("addChoice",b.current_field,"New Choice","");e.pdsformbuilder("selectField",b.current_field);a.preventDefault();return false});this.$iPC.find(".del_choice").live("click",function(c){var d=a(this);e.pdsformbuilder("deleteChoice",b.current_field,d.attr("data-choice"));e.pdsformbuilder("selectField",b.current_field);c.preventDefault();return false});if(d["importData"]!="")e.pdsformbuilder("importData",d["importData"])})},addPage:function(){return this.each(function(){var b='<li id="pagination_header" style="" class="li_pagination" title="Click to edit"><table class="ap_table_pagination" width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td align="center"></td></tr></tbody></table></li>';this.page_count++;$page=a('<li class="form-page form-page-'+this.page_count+'" data-page="'+this.page_count+'"></li>');$page.html('<ul class="form-page-holder"></ul>');$page.find("ul:first-child").html(this.nofield_in_page);this.$fOH.append($page);this.current_page=this.page_count;this.pages.push($page);this.page_fields[this.current_page]=[]})},deletePage:function(a){return this.each(function(){var b=0;var c=this.page_fields[a];for(var d=0;d<c.length;d++){b=c[d];var e=this.fields[b];e.remove();delete this.fields[b]}delete this.page_fields[a];this.pages.remove(a)})},setCurrentPage:function(a){return this.each(function(){this.current_page=a})},addField:function(b,c){if(!c||c==undefined||typeof c!=="object")c={};return this.each(function(){var e=this;var f=a(this);try{var g="create_"+b;var h=d[g](this.current_page,c);var i=h[0];this.$fOH.find("li.form-page-"+this.current_page+" ul").append(i);this.fields_count++;this.current_field=this.fields_count;this.fields[this.current_field]=i;this.page_fields[this.current_page].push(this.current_field);this.field_childs[this.current_field]=[];f.find("li.form-page-"+this.current_page+" ul li.no_fields_in_page").remove();this.$tabs.tabs("select",1);var j=a('<div id="element_properties_'+this.current_field+'" class="hidden element_properties_hidden"></div>');for(var k in h[1]){if(k!="childs"){j.append('<input type="hidden" name="'+this.paramKey+"[fields]["+this.current_field+"][attrs]["+k+']" value="'+h[1][k]+'" id="element_'+this.current_field+"_attrs_"+k+'" />')}}this.$fFC.find("#element_properties_hidden_container").append(j);if(h[1]["childs"]!=undefined){j.append('<div id="element_childs_'+this.current_field+'"></div>');for(var k=1;k<=h[1]["childs"];k++){f.pdsformbuilder("addChoice",this.current_field,"New Choice","")}}f.pdsformbuilder("selectField",this.current_field)}catch(l){}})},deleteField:function(b){return this.each(function(){try{var c=this;var d=a(this);var e=this.fields[b];if(this.page_fields[this.current_page].has(b)){var f=this.page_fields[this.current_page].search(b);this.page_fields[this.current_page].remove(f);e.fadeOut("slow",function(){a(this).remove();delete c.fields[b];if(c.page_fields[c.current_page].length<1)d.find("li.form-page-"+c.current_page+" ul").html(c.nofield_in_page);delete c.field_childs[b];c.$fFC.find("#element_properties_"+b).remove();d.pdsformbuilder("selectNone")})}}catch(g){}})},selectNone:function(){return this.each(function(){this.current_field=0;this.$iPC.find("#element_inactive_msg").css("display","block");this.$iPC.find("#element_properties_form").css("display","none");this.$fOH.find("ul li.field_li").removeClass("highlighted")})},selectField:function(b){return this.each(function(){var c=this;var d=a(this);this.$iPC.find("#element_inactive_msg").css("display","none");this.$iPC.find("#element_properties_form").css("display","block");d.pdsformbuilder("highlightField",b);var e=this.$fFC.find("#element_"+b+"_attrs_type").val();var f=this.$fFC.find("#element_"+b+"_attrs_as").val();this.$iPC.find("#element_label").focus().syncEdit("updateSyncTo","#field_li_"+b+" label.description");this.$iPC.find("#element_desc").syncEdit("updateSyncTo","#field_li_"+b+" p");this.$iPC.find("#element_class").syncEdit("updateSyncTo","#element_"+b+"_attrs_class");this.$iPC.find("#element_required").syncEdit("updateSyncTo","#element_"+b+"_attrs_required");this.$iPC.find("#element_attrs").syncEdit("updateSyncTo","#element_"+b+"_attrs_attrs");this.$iPC.find("#element_active").syncEdit("updateSyncTo","#element_"+b+"_attrs_active");if(a("#element_"+b+"_attrs_required").val()=="1"){this.$iPC.find("#element_required").attr("checked",true)}else{this.$iPC.find("#element_required").attr("checked",false)}this.$iPC.find("#element_name").syncEdit("updateSyncTo","#element_"+b+"_attrs_name");if(e=="text"||e=="dropdown"){this.$iPC.find("#element_size").parent().show(0);this.$iPC.find("#element_size").syncEdit("updateSyncTo","#element_"+b+"_attrs_size")}else{this.$iPC.find("#element_size").parent().hide(0)}if(e=="text"){this.$iPC.find("#element_as").parent().show(0);this.$iPC.find("#element_as").syncEdit("updateSyncTo","#element_"+b+"_attrs_as")}else{this.$iPC.find("#element_as").parent().hide(0)}if(e&&e!="checkbox"&&e!="file"){this.$iPC.find("#element_value").parent().show(0);this.$iPC.find("#element_placeholder").parent().show(0);if(e=="textarea"){this.$iPC.find("#element_value").syncEdit("updateSyncTo","#field_li_"+b+" div textarea");this.$iPC.find("#element_placeholder").syncEdit("updateSyncTo","#field_li_"+b+" div textarea")}if(e=="dropdown")this.$iPC.find("#element_value").syncEdit("updateSyncTo","#field_li_"+b+" div select");else{this.$iPC.find("#element_value").syncEdit("updateSyncTo","#field_li_"+b+" div input");this.$iPC.find("#element_placeholder").syncEdit("updateSyncTo","#element_"+b+"_attrs_placeholder")}}else{this.$iPC.find("#element_value").parent().hide(0);this.$iPC.find("#element_placeholder").parent().hide(0)}if(e=="textarea"){this.$iPC.find("#prop_element_rowcol").show(0);this.$iPC.find("#element_rows").syncEdit("updateSyncTo","#element_"+b+"_attrs_rows");this.$iPC.find("#element_cols").syncEdit("updateSyncTo","#element_"+b+"_attrs_cols")}else{this.$iPC.find("#prop_element_rowcol").hide(0)}if(e=="checkbox"||e=="multiplechoice"||e=="dropdown"){this.$iPC.find("#prop_choices").show(0)}else{this.$iPC.find("#prop_choices").hide(0)}if(e=="file"){this.$iPC.find("#prop_file_options").show(0);this.$iPC.find("#element_filter").syncEdit("updateSyncTo","#element_"+b+"_attrs_filter");this.$iPC.find("#element_exts").syncEdit("updateSyncTo","#element_"+b+"_attrs_exts");this.$iPC.find("#element_maxsize").syncEdit("updateSyncTo","#element_"+b+"_attrs_maxsize")}else{this.$iPC.find("#prop_file_options").hide(0)}d.pdsformbuilder("_buildFieldData",b)})},_buildFieldData:function(b){return this.each(function(){var c=this;var d=a(this);var e=this.options;var f=this.$fFC.find("#element_"+b+"_attrs_type").val();var g=this.$fFC.find("#element_"+b+"_attrs_as").val();if(f=="checkbox"||f=="multiplechoice"||f=="dropdown"){var h=this.$fFC.find("#element_childs_"+b);var i=0;var j=false;var k=0;var l=[];var m="";this.$iPC.find("#element_choices").html("");h.find("input").each(function(){if(i>0&&i%3==0)j=true;if(j){l.push(k);m='<li data-choice="'+k+'">'+m+'<img class="del_choice" title="Delete this Choice" alt="Delete" src="'+c.options["imagebase"]+'delete.png" style="vertical-align: middle" id="choicedel_'+k+'" data-choice="'+k+'" /></li>';c.$iPC.find("#element_choices").append(m);j=false;m=""}else{k=a(this).attr("data-count")}if(i%3==0){if(f=="checkbox_bak"){m+='<input type="checkbox" title="Select this choice to set as already selected" class="choices_default" id="choice_'+a(this).attr("data-count")+'_default" data-choice="'+a(this).attr("data-count")+'" value="1" checked="false"/>'}}if(i%3==1){m+='<input type="text" value="'+a(this).val()+'" autocomplete="off" class="text" id="choice_'+a(this).attr("data-count")+'_label" data-choice="'+a(this).attr("data-count")+'"/>'}if(i%3==2){m+='<input type="text" value="'+a(this).val()+'" autocomplete="off" class="text" id="choice_'+a(this).attr("data-count")+'_value" data-choice="'+a(this).attr("data-count")+'" />'}i++});if(m!=""){l.push(k);m='<li data-choice="'+k+'">'+m+'<img class="del_choice" title="Delete this Choice" alt="Delete" src="'+e["imagebase"]+'delete.png" style="vertical-align: middle" id="choicedel_'+k+'" data-choice="'+k+'" /></li>';this.$iPC.find("#element_choices").append(m)}for(var n=0;n<l.length;n++){if(f=="checkbox"){this.$iPC.find("#element_choices #choice_"+l[n]+"_default").syncEdit("updateSyncTo",e["formFooterContainer"]+" #element_"+b+"_childs_"+l[n]+"_default",true,{greedy:"yes"})}if(f=="checkbox"||f=="multiplechoice"){this.$iPC.find("#element_choices #choice_"+l[n]+"_label").syncEdit("updateSyncTo",e["formOutputHolder"]+" div#element_"+b+" span[data-count="+l[n]+"] label, "+e["formFooterContainer"]+" #element_"+b+"_childs_"+l[n]+"_label",true,{greedy:"yes"});this.$iPC.find("#element_choices #choice_"+l[n]+"_value").syncEdit("updateSyncTo",e["formFooterContainer"]+" #element_"+b+"_childs_"+l[n]+"_value",true,{greedy:"yes"})}if(f=="dropdown"){this.$iPC.find("#element_choices #choice_"+l[n]+"_label").syncEdit("updateSyncTo",e["formOutputHolder"]+" select#element_"+b+" option[data-count="+l[n]+"], "+e["formFooterContainer"]+" #element_"+b+"_childs_"+l[n]+"_label",true,{greedy:"yes"});this.$iPC.find("#element_choices #choice_"+l[n]+"_value").syncEdit("updateSyncTo",e["formFooterContainer"]+" #element_"+b+"_childs_"+l[n]+"_value",true,{greedy:"yes",onSync:function(c,d,f){a(e["formOutputHolder"]+" select#element_"+b+" option[data-count="+f.attr("data-choice")+"]").attr("value",d)}})}}this.$iPC.find("#element_choices").scrollTop((k+1)*25)}})},highlightField:function(a){return this.each(function(){this.current_field=a;this.$fOH.find("ul li.field_li").removeClass("highlighted");this.$fOH.find("ul li#field_li_"+a).addClass("highlighted")})},fieldType:function(a){this.each(function(){return this.$fFC.find("#element_"+a+"_attrs_type").val()})},fieldAs:function(a){this.each(function(){return this.$fFC.find("#element_"+a+"_attrs_as").val()})},addChoice:function(b,c,e){return this.each(function(){var f=this.$fFC.find("#element_"+b+"_attrs_type").val();var g=a("#element_properties_"+b+" #element_childs_"+b);var h=0;if(g.find("input").length>0)h=Number(g.find("input:last-child").attr("data-count"))+1;else h=1;g.append('<input type="hidden" name="'+this.paramKey+"[fields]["+b+"][childs]["+h+'][default]" id="element_'+b+"_childs_"+h+'_default" value="" data-count="'+h+'" />');g.append('<input type="hidden" name="'+this.paramKey+"[fields]["+b+"][childs]["+h+'][label]" id="element_'+b+"_childs_"+h+'_label" value="'+c+'" data-count="'+h+'" />');g.append('<input type="hidden" name="'+this.paramKey+"[fields]["+b+"][childs]["+h+'][value]" id="element_'+b+"_childs_"+h+'_value" value="'+e+'" data-count="'+h+'" />');if(f=="checkbox")this.$fOH.find("#element_"+b).append(d.checkbox_child(c,e,h));else if(f=="multiplechoice")this.$fOH.find("#element_"+b).append(d.multiplechoice_child(c,e,h));else if(f=="dropdown")this.$fOH.find("#element_"+b).append(d.dropdown_child(c,e,h))})},deleteChoice:function(b,c){return this.each(function(){var d=this.$fFC.find("#element_"+b+"_attrs_type").val();a("#element_properties_"+b+" #element_childs_"+b+" #element_"+b+"_childs_"+c+"_default").remove();a("#element_properties_"+b+" #element_childs_"+b+" #element_"+b+"_childs_"+c+"_label").remove();a("#element_properties_"+b+" #element_childs_"+b+" #element_"+b+"_childs_"+c+"_value").remove();if(d=="dropdown")this.$fOH.find("#element_"+b+" option[data-count="+c+"]").remove();else this.$fOH.find("#element_"+b+" span[data-count="+c+"]").remove()})},updateChoice:function(b,c,d,e){return this.each(function(){a("#element_properties_"+b+" #element_childs_"+b+" #element_"+b+"_childs_"+c+"_label").val(d);this.$fOH.find("#element_"+b+" span[data-count="+c+"] label").html(d);if(e&&e!=undefined){a("#element_properties_"+b+" #element_childs_"+b+" #element_"+b+"_childs_"+c+"_value").val(e);this.$fOH.find("#element_"+b+" span[data-count="+c+"] input").val(e)}})},updateFormData:function(b,c){return this.each(function(){switch(b){case"title":this.$fPC.find("#form_title").val(c).keyup();this.$fPC.find("#form_title").syncEdit("sync");break;case"desc":this.$fPC.find("#form_description").val(c).keyup();this.$fPC.find("#form_description").syncEdit("sync");break;case"footer_desc":this.$fPC.find("#form_footer_description").val(c).keyup();this.$fPC.find("#form_footer_description").syncEdit("sync");break;case"captcha":this.$fPC.find("#form_captcha option").filter(function(){return a(this).val()==c}).attr("selected",true).change();this.$fPC.find("#form_capchta").syncEdit("sync");break;case"maxsubs":this.$fPC.find("#form_maxsubs").val(c).keyup();this.$fPC.find("#form_maxsubs").syncEdit("sync");break;case"perip":if(c=="1")this.$fPC.find("#form_limit_perip").attr("checked",true);else this.$fPC.find("#form_limit_perip").attr("checked",false);this.$fPC.find("#form_limit_perip").syncEdit("sync");this.$fFC.find("#form_limit_perip_value").val(c);break}})},importData:function(b){return this.each(function(){var c=a(this);if(b["title"]!=undefined)c.pdsformbuilder("updateFormData","title",b["title"]);if(b["desc"]!=undefined)c.pdsformbuilder("updateFormData","desc",b["desc"]);if(b["footer_desc"]!=undefined)c.pdsformbuilder("updateFormData","footer_desc",b["footer_desc"]);if(b["captcha"]!=undefined)c.pdsformbuilder("updateFormData","captcha",b["captcha"]);if(b["maxsubs"]!=undefined)c.pdsformbuilder("updateFormData","maxsubs",b["maxsubs"]);if(b["perip"]!=undefined)c.pdsformbuilder("updateFormData","perip",b["perip"]);if(b["fields"]!=undefined){var d=undefined;for(var e in b["fields"]){d=b["fields"][e];if(d["childs"]!=undefined)d["attrs"]["childs"]=0;c.pdsformbuilder("addField",d["attrs"]["type"],d["attrs"]);if(d["childs"]!=undefined){var f=undefined;for(var g in d["childs"]){f=d["childs"][g];c.pdsformbuilder("addChoice",this.current_field,f.label,f.value)}c.pdsformbuilder("selectField",this.current_field)}}}c.pdsformbuilder("selectNone");this.$tabs.tabs("select",0)})}};var c={header:function(){return'<h2 id="form-header-title">Untitled Form</h2><p id="form-header-desc">This is your form description. Click here to edit.</p>'},footer:function(a){return'<p id="form-footer-desc">This is your form footer description. Click here to edit.</p><input type="hidden" id="form_title_value" name="'+a+'[title]" value="" /><input type="hidden" name="'+a+'[desc]" id="form_desc_value" /><input type="hidden" id="form_footer_desc_value" name="'+a+'[footer_desc]" /><input type="hidden" id="form_captcha_value" name="'+a+'[captcha]" /><input type="hidden" id="form_limit_perip_value" name="'+a+'[perip]" value="0" /><input type="hidden" id="form_maxsubs_value" name="'+a+'[maxsubs]" value="0" /><div class="hidden" id="element_properties_hidden_container"></div>'},form_property:function(){return""+'<div id="form_properties_pane" class="box">'+'<div id="form_properties_holder">'+'<ul id="all_form_properties">'+'<li class="form_prop">'+'<label class="desc" for="form_title">Form Title</label>'+'<input id="form_title" class="text medium" value="" tabindex="1" type="text" size="45" />'+"</li>"+'<li class="form_prop">'+'<label class="desc" for="form_description">Description</label>'+'<textarea class="textarea small" rows="5" cols="44" id="form_description" tabindex="2"></textarea>'+"</li>"+'<li class="form_prop">'+'<label class="desc" for="form_footer_description">Footer Description</label>'+'<textarea class="textarea small" rows="5" cols="44" id="form_footer_description" tabindex="3"></textarea>'+"</li>"+'<li class="form_prop">'+'<label class="desc" for="form_captcha">Use Captcha</label>'+'<select class="select" id="form_captcha" autocomplete="off">'+'<option value="">None</option>'+'<option value="r">reCAPTCHA (Hardest)</option>'+'<option value="m">Mathematical (Medium)</option>'+'<option value="i">Simple Image (Easiest)</option>'+"</select>"+"</li>"+'<li class="form_prop">'+'<label class="desc" for="form_maxsubs">'+"Maximum Accepted Entries "+'<input type="text" id="form_maxsubs" value="0" size=="5" class"text medium" title="Value \'0\' refers to unlimited entries" />'+"</label>"+"</li>"+'<li class="form_prop">'+'<label class="desc" for="form_limit_perip">'+"Limit One Entry Per IP "+'<input type="checkbox" id="form_limit_perip" value="1" checked="false"/>'+"</label>"+"</li>"+"</ul>"+"</div>"+"</div>"},field_property:function(a){return""+'<div id="field_properties_pane" class="box">'+'<div id="element_properties">'+'<div id="element_inactive_msg">'+'<img src="'+a+'arrow_border_left.png" style="margin-top: 80px" />'+"<h3>Please select a field</h3>"+'<p id="eim_p">Click on a field on the left to change its properties.</p>'+"</div>"+'<div id="element_properties_form">'+'<ul id="all_properties">'+'<li id="prop_element_label">'+'<label class="desc" for="element_label">Field Label</label>'+'<input type="text" id="element_label" class="input" size="45" />'+"</li>"+'<li id="prop_element_type">'+'<label class="desc" for="element_as">Field Type</label>'+'<select class="select full" id="element_as" autocomplete="off" tabindex="12">'+'<option value="text">Text</option>'+'<option value="number">Number</option>'+'<option value="date">Date</option>'+'<option value="time">Time</option>'+'<option value="phone">Phone</option>'+'<option value="url">Web Site</option>'+'<option value="email">Email</option>'+"</select>"+"</li>"+'<li class="prop_required">'+'<label class="required" for="element_required">'+"Required * "+'<input type="checkbox" id="element_required" value="1" checked="false"/>'+"</label>"+"</li>"+'<li id="prop_element_size">'+'<label class="desc" for="element_size">Field Size</label>'+'<select class="select full" id="element_size" autocomplete="off" tabindex="13">'+'<option value="default-auto">Default</option>'+'<option value="small">Small</option>'+'<option value="medium">Medium</option>'+'<option value="large">Large</option>'+"</select>"+"</li>"+'<li id="prop_choices">'+'<fieldset class="choices">'+"<legend>Choices</legend>"+'<ul id="element_choices">'+"</ul>"+"</fieldset>"+'<a id="add_elem_choice" style="font-size:11px;">Add Choice</a>'+"</li>"+'<li id="prop_file_options">'+'<fieldset class="choices">'+"<span>"+'<div id="form_file_limit_type">'+'<label class="choice" for="file_type_list"><select class="select" id="element_filter" autocomplete="off" style="width: 100px">'+'<option id="element_file_all" value="allow_all">Allow All</option>'+'<option id="element_file_allow" value="only_allow">Only Allow</option>'+'<option id="element_file_block" value="only_block">Block</option>'+"</select>file types listed below:</label>"+'<textarea class="textarea" rows="10" cols="100" style="width: 230px; height: 30px;margin-top: 5px" id="element_exts"></textarea>'+"</div>"+'<div style="clear: both"></div>'+'<div id="form_file_limit_size">'+"Limit file to a maximum "+'<input id="element_maxsize" style="width: 40px" class="text" value="" maxlength="255" type="text" /> MB'+"</div>"+"</span>"+"</fieldset>"+"</li>"+'<li id="prop_element_rowcol">'+'<label for="element_rows">'+'Rows <input type="text" id="element_rows" class="input" style="width:45px" />'+"</label>"+'<label for="element_cols">'+'Columns <input type="text" id="element_cols" class="input" style="width:45px;" />'+"</label>"+"</li>"+'<li id="prop_element_desc">'+'<label class="desc" for="element_desc">Field Description</label>'+'<textarea id="element_desc" class="textarea" rows="3" cols="44"></textarea>'+"</li>"+'<li id="prop_element_value">'+'<label class="desc" for="element_value">Field Value(Default)</label>'+'<textarea id="element_value" class="textarea" rows="3" cols="44"></textarea>'+"</li>"+'<li id="prop_element_placeholder">'+'<label class="desc" for="element_placeholder">Field Placeholder</label>'+'<input type="text" id="element_placeholder" class="input" size="45" />'+"</li>"+'<li id="prop_element_name">'+'<label class="desc" for="element_name">Field Name</label>'+'<input type="text" id="element_name" class="input" size="45" />'+"</li>"+'<li id="prop_element_class">'+'<label class="desc" for="element_class">Field Class</label>'+'<input type="text" id="element_class" class="input" size="45" />'+"</li>"+'<li id="prop_element_attrs">'+'<label class="desc" for="element_attrs">Field Extra Attributes</label>'+'<input type="text" id="element_attrs" class="input" size="45" />'+"</li>"+'<li id="prop_element_active">'+'<label class="desc" for="element_active">Field Active</label>'+'<select class="select" id="element_active" autocomplete="off">'+'<option id="element_active_1" value="1">Yes</option>'+'<option id="element_active_0" value="0">No</option>'+"</select>"+"</li>"+"<li>"+'<br/><a href="#" id="element_delete" title="Delete this Field from Form">Delete Field</a>'+"</li>"+"</ul>"+"</div>"+"</div>"+"</div>"}};var d={_count:0,create_text:function(b,c){d._count++;var e={label:"Text",type:"text",as:"text",name:"element_"+d._count,size:"medium","class":"",value:"",desc:"",required:"",placeholder:"",attrs:"",active:1};var f=a.extend({},e,c);var g=a('<li id="field_li_'+d._count+'" data-page="'+b+'" data-field="'+d._count+'" class="field_li"><label class="description">'+f["label"]+"</label>"+'<div><input id="element_'+d._count+'" class="element text '+f["size"]+'" value="'+f["value"]+'" type="text" disabled/></div><p>'+f["desc"]+"</p></li>");return[g,f]},create_textarea:function(b,c){d._count++;var e={label:"Text",type:"textarea",name:"element_"+d._count,"class":"",value:"",desc:"",rows:8,cols:90,required:"",placeholder:"",attrs:"",active:1};var f=a.extend({},e,c);var g=a('<li id="field_li_'+d._count+'" data-page="'+b+'" data-field="'+d._count+'" class="field_li"><label class="description">'+f["label"]+"</label>"+'<div><textarea id="element_'+d._count+'" class="element textarea '+f["size"]+'" rows="'+f["rows"]+'" cols="'+f["cols"]+'" disabled>'+f["value"]+"</textarea></div><p>"+f["desc"]+"</p></li>");return[g,f]},create_checkbox:function(b,c){d._count++;var e={label:"Checkboxes",type:"checkbox",name:"element_"+d._count,"class":"",desc:"",childs:3,required:"",attrs:"",active:1};var f=a.extend({},e,c);var g=a('<li id="field_li_'+d._count+'" data-page="'+b+'" data-field="'+d._count+'" class="field_li">'+'<label class="description">'+f["label"]+"</label>"+'<div id="element_'+d._count+'">'+"</div><p>"+f["desc"]+"</p></li>");return[g,f]},checkbox_child:function(a,b,c){return'<span data-count="'+c+'"><input id="element_'+d._count+"_"+c+'" class="element checkbox" type="checkbox" value="'+b+'" disabled/><label class="choice">'+a+"</label></span>"},create_multiplechoice:function(b,c){d._count++;var e={label:"Multiple Choices",type:"multiplechoice",name:"element_"+d._count,"class":"",desc:"",childs:3,required:"",attrs:"",active:1};var f=a.extend({},e,c);var g=a('<li id="field_li_'+d._count+'" data-page="'+b+'" data-field="'+d._count+'" class="field_li">'+'<label class="description">'+f["label"]+"</label>"+'<div id="element_'+d._count+'">'+"</div><p>"+f["desc"]+"</p></li>");return[g,f]},multiplechoice_child:function(a,b,c){return'<span data-count="'+c+'"><input id="element_'+d._count+"_"+c+'" class="element radio" type="radio" value="'+b+'" disabled/><label class="choice">'+a+"</label></span>"},create_dropdown:function(b,c){d._count++;var e={label:"Drop Down",type:"dropdown",name:"element_"+d._count,size:"medium","class":"",value:"",desc:"",required:"",childs:3,attrs:"",active:1};var f=a.extend({},e,c);var g=a('<li id="field_li_'+d._count+'" data-page="'+b+'" data-field="'+d._count+'" class="field_li"><label class="description">'+f["label"]+"</label>"+'<div><select id="element_'+d._count+'" class="element select '+f["size"]+'" type="text"></select></div><p>'+f["desc"]+"</p></li>");return[g,f]},dropdown_child:function(a,b,c){return'<option data-count="'+c+'" id="element_'+d._count+"_"+c+'" value="'+b+'">'+a+"</option>"},create_file:function(b,c){d._count++;var e={label:"Upload File",type:"file",name:"element_"+d._count,"class":"",desc:"",required:"",maxsize:5,exts:"*",filter:"allow_all",attrs:"",active:1};var f=a.extend({},e,c);var g=a('<li id="field_li_'+d._count+'" data-page="'+b+'" data-field="'+d._count+'" class="field_li"><label class="description">'+f["label"]+"</label>"+'<div><input id="element_'+d._count+'" name="element_'+d._count+'" class="element file medium" type="file" disabled/></div><p>'+f["desc"]+"</p></li>");return[g,f]}};a.fn.pdsformbuilder.defaults={paramKey:"formbuilderdata",imagebase:"/",outputName:"formbuilder-data",outputContainer:"#formbuilder-output",tabsHolder:"#builder-tabs",itemsContainer:"#formbuilder-sidebar #form-items",itemPropertyContainer:"#formbuilder-sidebar #form-item-property",formPropertyContainer:"#formbuilder-sidebar #form-property",formHeaderContainer:"#form-header",formContentsContainer:"#form-contents",formFooterContainer:"#form-footer",formOutputHolder:"#form-contents #form-builder-sortable",itemsAvailable:{text:"Single Line Text",textarea:"Paragraph",checkbox:"Checkboxes",multiplechoice:"Multiple Choice",dropdown:"Drop Down",file:"File Upload"},importData:{}}})(jQuery)